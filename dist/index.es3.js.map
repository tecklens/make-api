{"version":3,"file":"index.es3.js","sources":["../src/components/Form.tsx"],"sourcesContent":["\r\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\r\nimport { Slot } from \"@radix-ui/react-slot\"\r\nimport {\r\n  Controller,\r\n  ControllerProps,\r\n  FieldPath,\r\n  FieldValues,\r\n  FormProvider,\r\n  useFormContext,\r\n} from \"react-hook-form\"\r\n\r\nimport { cn } from \"../lib/utils\"\r\nimport { Label } from \"./Label\"\r\nimport {\r\n  ComponentPropsWithoutRef,\r\n  createContext,\r\n  ElementRef,\r\n  forwardRef,\r\n  HTMLAttributes,\r\n  useContext,\r\n  useId\r\n} from \"react\";\r\n\r\nconst Form = FormProvider\r\n\r\ntype FormFieldContextValue<\r\n  TFieldValues extends FieldValues = FieldValues,\r\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\r\n> = {\r\n  name: TName\r\n}\r\n\r\nconst FormFieldContext = createContext<FormFieldContextValue>(\r\n  {} as FormFieldContextValue\r\n)\r\n\r\nconst FormField = <\r\n  TFieldValues extends FieldValues = FieldValues,\r\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\r\n>({\r\n  ...props\r\n}: ControllerProps<TFieldValues, TName>) => {\r\n  return (\r\n    <FormFieldContext.Provider value={{ name: props.name }}>\r\n      <Controller {...props} />\r\n    </FormFieldContext.Provider>\r\n  )\r\n}\r\n\r\nconst useFormField = () => {\r\n  const fieldContext = useContext(FormFieldContext)\r\n  const itemContext = useContext(FormItemContext)\r\n  const { getFieldState, formState } = useFormContext()\r\n\r\n  const fieldState = getFieldState(fieldContext.name, formState)\r\n\r\n  if (!fieldContext) {\r\n    throw new Error(\"useFormField should be used within <FormField>\")\r\n  }\r\n\r\n  const { id } = itemContext\r\n\r\n  return {\r\n    id,\r\n    name: fieldContext.name,\r\n    formItemId: `${id}-form-item`,\r\n    formDescriptionId: `${id}-form-item-description`,\r\n    formMessageId: `${id}-form-item-message`,\r\n    ...fieldState,\r\n  }\r\n}\r\n\r\ntype FormItemContextValue = {\r\n  id: string\r\n}\r\n\r\nconst FormItemContext = createContext<FormItemContextValue>(\r\n  {} as FormItemContextValue\r\n)\r\n\r\nconst FormItem = forwardRef<\r\n  HTMLDivElement,\r\n  HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => {\r\n  const id = useId()\r\n\r\n  return (\r\n    <FormItemContext.Provider value={{ id }}>\r\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\r\n    </FormItemContext.Provider>\r\n  )\r\n})\r\nFormItem.displayName = \"FormItem\"\r\n\r\nconst FormLabel = forwardRef<\r\n  ElementRef<typeof LabelPrimitive.Root>,\r\n  ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\r\n>(({ className, ...props }, ref) => {\r\n  const { error, formItemId } = useFormField()\r\n\r\n  return (\r\n    <Label\r\n      ref={ref}\r\n      className={cn(error && \"text-destructive\", className)}\r\n      htmlFor={formItemId}\r\n      {...props}\r\n    />\r\n  )\r\n})\r\nFormLabel.displayName = \"FormLabel\"\r\n\r\nconst FormControl = forwardRef<\r\n  ElementRef<typeof Slot>,\r\n  ComponentPropsWithoutRef<typeof Slot>\r\n>(({ ...props }, ref) => {\r\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\r\n\r\n  return (\r\n    <Slot\r\n      ref={ref}\r\n      id={formItemId}\r\n      aria-describedby={\r\n        !error\r\n          ? `${formDescriptionId}`\r\n          : `${formDescriptionId} ${formMessageId}`\r\n      }\r\n      aria-invalid={!!error}\r\n      {...props}\r\n    />\r\n  )\r\n})\r\nFormControl.displayName = \"FormControl\"\r\n\r\nconst FormDescription = forwardRef<\r\n  HTMLParagraphElement,\r\n  HTMLAttributes<HTMLParagraphElement>\r\n>(({ className, ...props }, ref) => {\r\n  const { formDescriptionId } = useFormField()\r\n\r\n  return (\r\n    <p\r\n      ref={ref}\r\n      id={formDescriptionId}\r\n      className={cn(\"text-[0.8rem] text-muted-foreground\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n})\r\nFormDescription.displayName = \"FormDescription\"\r\n\r\nconst FormMessage = forwardRef<\r\n  HTMLParagraphElement,\r\n  HTMLAttributes<HTMLParagraphElement>\r\n>(({ className, children, ...props }, ref) => {\r\n  const { error, formMessageId } = useFormField()\r\n  const body = error ? String(error?.message) : children\r\n\r\n  if (!body) {\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <p\r\n      ref={ref}\r\n      id={formMessageId}\r\n      className={cn(\"text-[0.8rem] font-medium text-destructive\", className)}\r\n      {...props}\r\n    >\r\n      {body}\r\n    </p>\r\n  )\r\n})\r\nFormMessage.displayName = \"FormMessage\"\r\n\r\nexport {\r\n  useFormField,\r\n  Form,\r\n  FormItem,\r\n  FormLabel,\r\n  FormControl,\r\n  FormDescription,\r\n  FormMessage,\r\n  FormField,\r\n}\r\n"],"names":["Form","FormProvider","FormFieldContext","createContext","FormField","props","React","Controller","useFormField","fieldContext","useContext","itemContext","FormItemContext","getFieldState","formState","useFormContext","fieldState","id","FormItem","forwardRef","className","ref","useId","cn","FormLabel","error","formItemId","Label","FormControl","formDescriptionId","formMessageId","Slot","FormDescription","FormMessage","children","body"],"mappings":"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"}